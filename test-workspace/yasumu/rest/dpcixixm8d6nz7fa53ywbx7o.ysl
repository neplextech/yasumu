@rest

metadata {
  name: "Echo"
  method: "GET"
  id: "dpcixixm8d6nz7fa53ywbx7o"
  groupId: null
}

request {
  url: "{{API_URL}}"
  headers: []
  body: null
}

dependencies []

script {
  export function onRequest(req) {
    const userId = req.env.getSecret('USER_ID')
    req.headers.set('x-current-user-id', userId ?? 'NONE')
  }
  
  export function onResponse(req, res) {
    res.env.setVariable('SOURCE', res.json().meta.source)
  }
}

